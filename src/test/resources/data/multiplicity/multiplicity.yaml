version: 1
application:
  defaultLanguage: fr
  internationalizationName:
    fr: Test de valeurs multiples
    en: Multiple values test
  name: multiplicity
  version: 1
references:
  reference1:
    keyColumns: [groupe,equipe]
    columns:
      groupe:
      equipe:
      projets:
        checker:
          name: Integer
          params:
            required: true
            multiplicity: "MANY"
      names:
        checker:
          name: RegularExpression
          params:
            pattern: .*
            required: true
            multiplicity: "MANY"
      duration:
        checker:
          name: Float
          params:
            required: false
            multiplicity: "MANY"
      dates:
        checker:
          name: Date
          params:
            pattern: dd/MM/yyyy
            required: false
            multiplicity: "MANY"
  reference2:
    keyColumns: [groupe]
    columns:
      groupe:
    computedColumns:
      reference1:
        checker:
          name: Reference
          params:
            multiplicity: MANY
            refType: reference1
        computation:
          expression: >
            String groupe = datum["groupe"];
            references.reference1
            .findAll({it.refValues.groupe.equals(groupe)})
            .collect({it.naturalKey})
            .join(",");
          references:
            - reference1
dataTypes:
  bugs:
    data:
      bug:
        components:
          no:
          fichiers:
            checker:
              name: RegularExpression
              params:
                pattern: .*
                required: true
                multiplicity: "MANY"
          dates:
            checker:
              name: Date
              params:
                pattern: dd/MM/yyyy
                required: false
                multiplicity: "MANY"
          projets:
            checker:
              name: Integer
              params:
                required: true
                multiplicity: "MANY"
          durations:
            checker:
              name: Float
              params:
                required: false
                multiplicity: "MANY"
          reference1:
            checker:
              name: Reference
              params:
                multiplicity: MANY
                refType: reference1

    format:
      headerLine: 1
      firstRowLine: 2
      columns:
        - header: no
          boundTo:
            variable: bug
            component: no
        - header: fichiers
          boundTo:
            variable: bug
            component: fichiers
        - header: dates
          boundTo:
            variable: bug
            component: dates
        - header: projets
          boundTo:
            variable: bug
            component: projets
        - header: durations
          boundTo:
            variable: bug
            component: durations
        - header: reference1
          boundTo:
            variable: bug
            component: reference1
    uniqueness:
      - variable: bug
        component: no